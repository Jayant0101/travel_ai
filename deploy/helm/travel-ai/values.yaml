# ── Global ──────────────────────────────────────
global:
  imageRegistry: ""     # e.g. us-central1-docker.pkg.dev/my-project/travel-ai
  imagePullSecrets: []
  env: production

# ── Backend ─────────────────────────────────────
backend:
  image:
    repository: travel-ai-backend
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 3
  resources:
    requests:
      cpu: "250m"
      memory: "256Mi"
    limits:
      cpu: "1000m"
      memory: "512Mi"
  hpa:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 80
  livenessProbe:
    initialDelaySeconds: 20
    periodSeconds: 20
    timeoutSeconds: 5
    failureThreshold: 3
  readinessProbe:
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  pdb:
    enabled: true
    minAvailable: "70%"

# ── Frontend ─────────────────────────────────────
frontend:
  image:
    repository: travel-ai-frontend
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 2
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "256Mi"
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 8
    targetCPUUtilizationPercentage: 70
  pdb:
    enabled: true
    minAvailable: 1

# ── Ingress ──────────────────────────────────────
ingress:
  enabled: true
  className: nginx
  host: app.example.com
  tls:
    enabled: true
    clusterIssuer: letsencrypt-prod
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "120"
    nginx.ingress.kubernetes.io/limit-rps: "10"
    nginx.ingress.kubernetes.io/limit-burst-multiplier: "5"

# ── Config (non-sensitive) ────────────────────────
config:
  aiProvider: "gemini"
  aiModel: "gemini-1.5-flash"
  dbName: "travel_agent_db"
  corsOrigins: "*"
  jwtAlgorithm: "HS256"
  accessTokenExpireMinutes: "30"
  refreshTokenExpireDays: "7"
  logLevel: "INFO"
  mongoMaxPoolSize: "50"
  mongoMinPoolSize: "5"
  cacheBackend: "redis"
  redisUrl: "redis://redis-master.redis.svc.cluster.local:6379/0"
  cacheTtlSeconds: "3600"
  rateLimitPerMinute: "30"
  rateLimitAiPerMinute: "5"

# ── External Secrets ──────────────────────────────
externalSecrets:
  enabled: true
  secretStoreName: gcp-secret-manager
  secretStoreKind: ClusterSecretStore
  refreshInterval: 1h
  # GSM secret names to K8s secret keys mapping
  secrets:
    google-api-key: google-api-key
    jwt-secret: jwt-secret
    mongo-url: mongo-url
