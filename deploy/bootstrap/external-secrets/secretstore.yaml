# ClusterSecretStore backed by Google Secret Manager via Workload Identity.
# Prerequisites:
#   1. GKE Workload Identity enabled on the cluster.
#   2. A Kubernetes ServiceAccount in each namespace annotated with the GSM-reader GSA.
#   3. IAM binding: KSA â†’ GSA with roles/secretmanager.secretAccessor.
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: gcp-secret-manager
spec:
  provider:
    gcpsm:
      projectID: ""          # Set via kustomize overlay or helm --set
      auth:
        workloadIdentity:
          clusterLocation: us-central1
          clusterName: travel-ai-cluster
          serviceAccountRef:
            name: external-secrets-sa
            namespace: external-secrets
